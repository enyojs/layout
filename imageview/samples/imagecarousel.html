<!DOCTYPE html>
<html>
<head>
	<title>Enyo ImageCarousel App</title>
	<link rel="shortcut icon" href="assets/favicon.ico">
	<meta http-equiv="Content-Type" content="text/html; charset=utf8">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<script src="../../../../enyo/enyo.js" type="text/javascript"></script>
	<script src="../../package.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="app.css">
</head>
<body class="enyo-unselectable">
	<script>
		enyo.kind({
			name: "App",
			handlers:{
				onresize: "resized"
			},
			components: [
				{name:"carousel", kind:"ImageCarousel", classes:"demo", onload:"load", onZoom:"zoom", onerror:"error", onTransitionStart: "transitionStart", onTransitionFinish: "transitionFinish"},
				{kind:"onyx.Groupbox",  style:"padding-top:10px; width:60%; margin:auto;", components: [
					{kind:"onyx.GroupboxHeader", content: "ImageCarousel Options"},
					{style:"text-align:center;", components: [
						{kind:"onyx.Button", content:"previous", ontap:"previous", classes:"demoButton"},
						{kind:"onyx.Button", content:"next", ontap:"next", classes:"demoButton"},
						{kind:"onyx.Button", content:"setIndex", ontap:"indexAnimated",  classes:"demoButton"},
						{kind:"onyx.Button", content:"setIndexDirect", ontap:"indexDirect", classes:"demoButton"}
					]}
				]}
			],
			create: function() {
				this.inherited(arguments);
				this.urls = [
					"assets/mercury.jpg",
					"assets/venus.jpg",
					"assets/earth.jpg",
					"assets/mars.jpg",
					"assets/jupiter.jpg",
					"assets/saturn.jpg",
					"assets/uranus.jpg",
					"assets/neptune.jpg"
				];
				// although we're specifying all the image urls now, the images themselves
				// only get created/loaded as needed
				this.$.carousel.setImages(this.urls);
			},
			load: function(inSender, inEvent) {
				enyo.log("image loaded: " + inEvent.originator.src);
			},
			zoom: function(inSender, inEvent) {
				enyo.log("image zoomed: " + inEvent.scale + " scale on " + inEvent.originator.src);
			},
			error: function(inSender, inEvent) {
				enyo.log("image error: " + inEvent.originator.src);
			},
			transitionStart: function(inSender, inEvent) {
				enyo.log("image now transitioning from: " + this.$.carousel.getImageByIndex(inEvent.fromIndex).src
						+ " to " + this.$.carousel.getImageByIndex(inEvent.toIndex).src);
			},
			transitionFinish: function(inSender, inEvent) {
				enyo.log("image transitioned to: " + this.$.carousel.getActiveImage().src);
			},
			resized: function(inSender, inEvent) {
				this.$.carousel.getActiveImage().setScale(this.$.carousel.defaultScale);
			},
			previous: function(inSender, inEvent) {
				this.$.carousel.previous();
			},
			next: function(inSender, inEvent) {
				this.$.carousel.next();
			},
			getRandomIndex: function() {
				var i = Math.floor(Math.random()*this.$.carousel.images.length);
				while(i==this.$.carousel.index) { //make sure it isn't the active index
					i = Math.floor(Math.random()*this.$.carousel.images.length);
				}
				return i;
			},
			indexAnimated: function(inSender, inEvent) {
				this.$.carousel.setIndex(this.getRandomIndex());
			},
			indexDirect: function(inSender, inEvent) {
				this.$.carousel.setIndexDirect(this.getRandomIndex());
			}
		});
		new App().write();
	</script>
</body>
</html>
